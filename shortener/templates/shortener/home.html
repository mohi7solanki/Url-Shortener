{% extends 'shortener/layout.html' %}
{% load widget_tweaks %}

{% block content %}
<div class="row">
	<div class="col-sm-6 mx-auto">
		<form method="POST" action="" novalidate>
			{% csrf_token %}
			{% for hidden_field in form.hidden_fields %}
				{{ hidden_field }}
			{% endfor %}

			{% if form.non_field_errors %}
			    <div class="alert alert-danger" role="alert">
			      {% for error in form.non_field_errors %}
			        {{ error }}
			      {% endfor %}
			    </div>
			{% endif %}

			{% if form.is_bound %}
				{% if form.url.errors %}
				<div class="form-group">
					<label class="lead">{{form.url.label}}</label>
						{% render_field form.url class="form-control is-invalid" %}
						{% for error in form.url.errors %}
				            <div class="invalid-feedback">
				              {{ error }}
				            </div>
				        {% endfor %}
				        <small class="form-text text-white">{{form.url.help_text}}</small>
			    </div>
				{% else %}
				<div class="form-group">
					<label class="lead">{{form.url.label}}</label>
						{% render_field form.url class="form-control is-valid" %}
						<small class="form-text text-white">{{form.url.help_text}}</small>
				</div>
				{% endif %}
				{% if form.short_url.errors %}
				<div class="form-group">
					<label>Customize your short link (optional):</label>
						{% render_field form.short_url class="form-control is-invalid" %}
						{% for error in form.short_url.errors %}
				            <div class="invalid-feedback">
				              {{ error }}
				            </div>
				        {% endfor %}
			    </div>
				{% else %}
				<div class="form-group">
					<label>Customize your short link (optional):</label>
						{% render_field form.short_url class="form-control is-valid" %}
				</div>
				{% endif %}
				<button type="submit" class="btn btn-primary">Submit</button>

			{% else %}
				<div class="form-group">
				    <label class="lead">{{form.url.label}}</label>
				    {% render_field form.url class='form-control' %}
				   	<small class="form-text text-white">{{form.url.help_text}}</small>
				</div>
			  	<div class="form-group">
				    <label>Customize your short link (optional):</label>
				    {% render_field form.short_url class='form-control' %}
			  	</div>
			  <button type="submit" class="btn btn-primary">Submit</button>
			{% endif %}
	    </form>
	</div>
</div>
{% endblock %}
